{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hamaniyounes/Desktop/website/ecomerceWebsite/app/stores/ProductGrid.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo, useState } from \"react\"\nimport Link from \"next/link\"\n\ntype Cat = { id: string; name: string; slug: string }\ntype Prod = {\n  id: string\n  name: string\n  slug: string\n  price: number\n  comparePrice: number | null\n  featuredImage: string | null\n  images: string[]\n  quantity: number\n  categoryId: string | null\n}\n\nexport default function ProductGrid({\n  store,\n  categories,\n  initialProducts,\n}: {\n  store: { id: string; currency: string; subdomain: string }\n  categories: Cat[]\n  initialProducts: Prod[]\n}) {\n  const [q, setQ] = useState(\"\")\n  const [cat, setCat] = useState<string>(\"all\")\n\n  const filtered = useMemo(() => {\n    const qq = q.trim().toLowerCase()\n    return initialProducts.filter((p) => {\n      const okQ = !qq || p.name.toLowerCase().includes(qq)\n      const okC = cat === \"all\" || p.categoryId === cat\n      return okQ && okC\n    })\n  }, [q, cat, initialProducts])\n\n  function addToCart(p: Prod) {\n    const key = `cart:${store.subdomain}`\n    const cart = JSON.parse(localStorage.getItem(key) || \"[]\")\n\n    const existing = cart.find((x: any) => x.productId === p.id)\n    if (existing) existing.quantity += 1\n    else cart.push({ productId: p.id, name: p.name, price: p.price, quantity: 1 })\n\n    localStorage.setItem(key, JSON.stringify(cart))\n    window.dispatchEvent(new Event(\"cart:update\"))\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Controls */}\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div className=\"flex gap-3 flex-col sm:flex-row sm:items-center\">\n          <input\n            value={q}\n            onChange={(e) => setQ(e.target.value)}\n            placeholder=\"Rechercher...\"\n            className=\"w-full sm:w-80 rounded-2xl border px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-slate-200\"\n          />\n\n          <select\n            value={cat}\n            onChange={(e) => setCat(e.target.value)}\n            className=\"w-full sm:w-56 rounded-2xl border px-4 py-3 text-sm bg-white\"\n          >\n            <option value=\"all\">Toutes les catégories</option>\n            {categories.map((c) => (\n              <option key={c.id} value={c.id}>\n                {c.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <p className=\"text-sm text-slate-500\">{filtered.length} résultat(s)</p>\n      </div>\n\n      {/* Grid */}\n      {filtered.length === 0 ? (\n        <div className=\"rounded-2xl border bg-white p-6 text-slate-500\">\n          Aucun produit.\n        </div>\n      ) : (\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n          {filtered.map((p) => {\n            const img = p.featuredImage || p.images?.[0] || \"/placeholder.png\"\n            const out = p.quantity <= 0\n            return (\n              <div key={p.id} className=\"group rounded-3xl border bg-white overflow-hidden hover:shadow-md transition\">\n                <div className=\"relative aspect-4/3 bg-slate-50\">\n                  {/* eslint-disable-next-line @next/next/no-img-element */}\n                  <img src={img} alt={p.name} className=\"h-full w-full object-cover group-hover:scale-[1.03] transition\" />\n                  {out && (\n                    <span className=\"absolute top-3 left-3 rounded-full bg-white/90 border px-3 py-1 text-xs font-semibold text-red-700\">\n                      Rupture\n                    </span>\n                  )}\n                </div>\n\n                <div className=\"p-4 space-y-2\">\n                  <Link\n                    href={`/storefront/${store.subdomain}/product/${p.slug}`}\n                    className=\"block font-semibold text-slate-900 hover:underline line-clamp-2\"\n                  >\n                    {p.name}\n                  </Link>\n\n                  <div className=\"flex items-center justify-between gap-3\">\n                    <div className=\"flex items-baseline gap-2\">\n                      <p className=\"text-lg font-extrabold\" style={{ color: \"var(--store-primary)\" }}>\n                        {p.price.toLocaleString()} {store.currency}\n                      </p>\n                      {p.comparePrice ? (\n                        <p className=\"text-sm text-slate-400 line-through\">\n                          {p.comparePrice.toLocaleString()}\n                        </p>\n                      ) : null}\n                    </div>\n                  </div>\n\n                  <button\n                    disabled={out}\n                    onClick={() => addToCart(p)}\n                    className=\"w-full rounded-2xl px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 disabled:cursor-not-allowed\"\n                    style={{ backgroundColor: \"var(--store-primary)\" }}\n                  >\n                    Ajouter au panier\n                  </button>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}