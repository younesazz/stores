{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/hamaniyounes/Desktop/website/ecomerceWebsite/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport function getSubdomain(host: string): string | null {\n  const mainDomain = process.env.NEXT_PUBLIC_MAIN_DOMAIN || 'localhost:3000'\n  \n  // Enlever le port si prÃ©sent\n  const cleanHost = host.split(':')[0]\n  const cleanMainDomain = mainDomain.split(':')[0]\n  \n  // Si on est sur le domaine principal, pas de subdomain\n  if (cleanHost === cleanMainDomain || cleanHost === 'localhost') {\n    return null\n  }\n  \n  // Extraire le subdomain\n  const parts = cleanHost.split('.')\n  const mainParts = cleanMainDomain.split('.')\n  \n  if (parts.length > mainParts.length) {\n    return parts[0]\n  }\n  \n  return null\n}\n\nexport function formatPrice(price: number, currency: string = 'DZD'): string {\n  return new Intl.NumberFormat('fr-DZ', {\n    style: 'currency',\n    currency: currency,\n    minimumFractionDigits: 2,\n  }).format(price)\n}\n\nexport function generateOrderNumber(): string {\n  const timestamp = Date.now().toString(36).toUpperCase()\n  const random = Math.random().toString(36).substring(2, 8).toUpperCase()\n  return `ORD-${timestamp}-${random}`\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,+MAAO,EAAC,IAAA,sLAAI,EAAC;AACtB;AAEO,SAAS,aAAa,IAAY;IACvC,MAAM,aAAa,sDAAuC;IAE1D,6BAA6B;IAC7B,MAAM,YAAY,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE;IACpC,MAAM,kBAAkB,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;IAEhD,uDAAuD;IACvD,IAAI,cAAc,mBAAmB,cAAc,aAAa;QAC9D,OAAO;IACT;IAEA,wBAAwB;IACxB,MAAM,QAAQ,UAAU,KAAK,CAAC;IAC9B,MAAM,YAAY,gBAAgB,KAAK,CAAC;IAExC,IAAI,MAAM,MAAM,GAAG,UAAU,MAAM,EAAE;QACnC,OAAO,KAAK,CAAC,EAAE;IACjB;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,KAAa,EAAE,WAAmB,KAAK;IACjE,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS;IACd,MAAM,YAAY,KAAK,GAAG,GAAG,QAAQ,CAAC,IAAI,WAAW;IACrD,MAAM,SAAS,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,WAAW;IACrE,OAAO,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,QAAQ;AACrC"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/hamaniyounes/Desktop/website/ecomerceWebsite/app/%28auth%29/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["import { getServerSession } from \"next-auth\"\nimport { authOptions } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/prisma\"\nimport { formatPrice } from \"@/lib/utils\"\nimport { ShoppingBag, Package, DollarSign, Store } from \"lucide-react\"\nimport { Key, ReactElement, JSXElementConstructor, ReactNode, ReactPortal } from \"react\"\n\nasync function getDashboardStats(tenantId: string) {\n  const [stores, products, orders, totalRevenue] = await Promise.all([\n    prisma.store.count({ where: { tenantId } }),\n    prisma.product.count({ where: { store: { tenantId } } }),\n    prisma.order.count({ where: { store: { tenantId } } }),\n    prisma.order.aggregate({\n      where: {\n        store: { tenantId },\n        orderStatus: { in: [\"DELIVERED\", \"SHIPPED\", \"PROCESSING\"] },\n      },\n      _sum: { total: true },\n    }),\n  ])\n\n  return {\n    stores,\n    products,\n    orders,\n    revenue: totalRevenue._sum.total || 0,\n  }\n}\n\nasync function getRecentOrders(tenantId: string) {\n  return prisma.order.findMany({\n    where: { store: { tenantId } },\n    include: { store: true, wilaya: true, commune: true },\n    orderBy: { createdAt: \"desc\" },\n    take: 5,\n  })\n}\n\nfunction StatCard({\n  title,\n  value,\n  description,\n  Icon,\n  iconClassName,\n}: {\n  title: string\n  value: React.ReactNode\n  description: string\n  Icon: React.ComponentType<{ className?: string }>\n  iconClassName?: string\n}) {\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-white shadow-sm\">\n      <div className=\"flex items-center justify-between p-5 pb-3\">\n        <p className=\"text-sm font-medium text-slate-500\">{title}</p>\n        <Icon className={`h-5 w-5 ${iconClassName ?? \"text-slate-700\"}`} />\n      </div>\n      <div className=\"px-5 pb-5\">\n        <div className=\"text-2xl font-bold text-slate-900\">{value}</div>\n        <p className=\"mt-1 text-xs text-slate-500\">{description}</p>\n      </div>\n    </div>\n  )\n}\n\nfunction StatusPill({ status }: { status: string }) {\n  const cls =\n    status === \"DELIVERED\"\n      ? \"bg-emerald-50 text-emerald-700 border-emerald-200\"\n      : status === \"CANCELLED\"\n      ? \"bg-red-50 text-red-700 border-red-200\"\n      : \"bg-blue-50 text-blue-700 border-blue-200\"\n\n  return (\n    <span className={`inline-flex items-center rounded-full border px-2 py-1 text-xs ${cls}`}>\n      {status}\n    </span>\n  )\n}\n\nexport default async function DashboardPage() {\n  const session = await getServerSession(authOptions)\n\n  if (!session?.user?.tenantId) {\n    return (\n      <div className=\"rounded-2xl border border-red-200 bg-red-50 p-4 text-red-800\">\n        Erreur: Tenant non trouvÃ©\n      </div>\n    )\n  }\n\n  const stats = await getDashboardStats(session.user.tenantId)\n  const recentOrders = await getRecentOrders(session.user.tenantId)\n\n  const statCards = [\n    {\n      title: \"Boutiques\",\n      value: stats.stores,\n      Icon: Store,\n      description: \"Boutiques actives\",\n      iconClassName: \"text-blue-600\",\n    },\n    {\n      title: \"Produits\",\n      value: stats.products,\n      Icon: Package,\n      description: \"Total des produits\",\n      iconClassName: \"text-emerald-600\",\n    },\n    {\n      title: \"Commandes\",\n      value: stats.orders,\n      Icon: ShoppingBag,\n      description: \"Toutes les commandes\",\n      iconClassName: \"text-purple-600\",\n    },\n    {\n      title: \"Revenu\",\n      value: formatPrice(stats.revenue),\n      Icon: DollarSign,\n      description: \"Revenu total\",\n      iconClassName: \"text-amber-600\",\n    },\n  ]\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-slate-900\">Tableau de bord</h1>\n        <p className=\"mt-2 text-slate-500\">\n          Bienvenue, {session.user.name} ðŸ‘‹\n        </p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\n        {statCards.map((s) => (\n          <StatCard\n            key={s.title}\n            title={s.title}\n            value={s.value}\n            description={s.description}\n            Icon={s.Icon}\n            iconClassName={s.iconClassName}\n          />\n        ))}\n      </div>\n\n      {/* Recent Orders */}\n      <div className=\"rounded-2xl border border-slate-200 bg-white shadow-sm\">\n        <div className=\"border-b border-slate-200 p-5\">\n          <h2 className=\"text-lg font-semibold text-slate-900\">Commandes rÃ©centes</h2>\n        </div>\n\n        <div className=\"p-5\">\n          {recentOrders.length === 0 ? (\n            <div className=\"py-10 text-center text-slate-500\">\n              <ShoppingBag className=\"mx-auto mb-4 h-12 w-12 opacity-50\" />\n              <p>Aucune commande pour le moment</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {recentOrders.map((order: { id: Key | null | undefined; orderNumber: string | number | bigint | boolean | ReactElement<unknown, string | JSXElementConstructor<any>> | Iterable<ReactNode> | ReactPortal | Promise<string | number | bigint | boolean | ReactPortal | ReactElement<unknown, string | JSXElementConstructor<any>> | Iterable<ReactNode> | null | undefined> | null | undefined; customerName: string | number | bigint | boolean | ReactElement<unknown, string | JSXElementConstructor<any>> | Iterable<ReactNode> | ReactPortal | Promise<string | number | bigint | boolean | ReactPortal | ReactElement<unknown, string | JSXElementConstructor<any>> | Iterable<ReactNode> | null | undefined> | null | undefined; wilaya: { name: any }; createdAt: string | number | Date; total: number; orderStatus: string }) => (\n                <div\n                  key={order.id}\n                  className=\"flex flex-col gap-3 rounded-2xl border border-slate-200 p-4 transition hover:bg-slate-50 md:flex-row md:items-center md:justify-between\"\n                >\n                  <div className=\"space-y-1\">\n                    <p className=\"font-medium text-slate-900\">{order.orderNumber}</p>\n                    <p className=\"text-sm text-slate-500\">\n                      {order.customerName} â€¢ {order.wilaya?.name ?? \"\"}\n                    </p>\n                    <p className=\"text-xs text-slate-500\">\n                      {new Date(order.createdAt).toLocaleDateString(\"fr-FR\")}\n                    </p>\n                  </div>\n\n                  <div className=\"md:text-right space-y-1\">\n                    <p className=\"font-semibold text-slate-900\">{formatPrice(order.total)}</p>\n                    <StatusPill status={order.orderStatus} />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}