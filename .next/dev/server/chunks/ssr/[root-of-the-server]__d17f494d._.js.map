{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/hamaniyounes/Desktop/website/ecomerceWebsite/app/%28auth%29/login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport { signIn } from \"next-auth/react\"\nimport { useRouter, useSearchParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\n\ntype ToastVariant = \"success\" | \"error\"\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n\n  const [isLoading, setIsLoading] = useState(false)\n  const [showPassword, setShowPassword] = useState(false)\n  const [formData, setFormData] = useState({ email: \"\", password: \"\" })\n  const [fieldError, setFieldError] = useState<{ email?: string }>({})\n\n  // ‚úÖ simple toast (no UI libs)\n  const [toast, setToast] = useState<{\n    open: boolean\n    variant: ToastVariant\n    title: string\n    description?: string\n  }>({ open: false, variant: \"success\", title: \"\" })\n\n  const closeToast = () => setToast((t) => ({ ...t, open: false }))\n  const showToast = (payload: Omit<typeof toast, \"open\">) => {\n    setToast({ open: true, ...payload })\n    window.clearTimeout((showToast as any)._t)\n    ;(showToast as any)._t = window.setTimeout(() => closeToast(), 3500)\n  }\n\n  // ‚å®Ô∏è ESC closes toast\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") closeToast()\n    }\n    window.addEventListener(\"keydown\", onKey)\n    return () => window.removeEventListener(\"keydown\", onKey)\n  }, [])\n\n  const isValidEmail = useMemo(() => {\n    if (!formData.email) return true\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)\n  }, [formData.email])\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setFormData((prev) => ({ ...prev, [name]: value }))\n\n    if (name === \"email\") {\n      setFieldError((prev) => ({ ...prev, email: \"\" }))\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    // ‚úÖ email format validation ŸÇÿ®ŸÑ submit\n    if (!isValidEmail) {\n      setFieldError({ email: \"Email invalide\" })\n      showToast({\n        variant: \"error\",\n        title: \"Erreur\",\n        description: \"Veuillez saisir un email valide\",\n      })\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      const result = await signIn(\"credentials\", {\n        email: formData.email,\n        password: formData.password,\n        redirect: false,\n      })\n\n      if (result?.error) {\n        showToast({\n          variant: \"error\",\n          title: \"Erreur de connexion\",\n          description: result.error,\n        })\n        return\n      }\n\n      if (result?.ok) {\n        showToast({\n          variant: \"success\",\n          title: \"Connexion r√©ussie\",\n          description: \"Redirection en cours...\",\n        })\n\n        const callbackUrl = searchParams?.get(\"callbackUrl\") || \"/dashboard\"\n        router.push(callbackUrl)\n        router.refresh()\n      }\n    } catch {\n      showToast({\n        variant: \"error\",\n        title: \"Erreur\",\n        description: \"Une erreur est survenue lors de la connexion\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const registered = searchParams?.get(\"registered\")\n\n  const inputBase =\n    \"w-full rounded-xl border bg-white dark:bg-slate-900 px-3 py-2 text-sm outline-none transition focus:ring-2\"\n  const inputOk = `${inputBase} border-slate-200 dark:border-slate-700 focus:ring-slate-300 dark:focus:ring-slate-700`\n  const inputErr = `${inputBase} border-red-500 focus:ring-red-200 dark:focus:ring-red-900`\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.25 }}\n      className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-4\"\n    >\n      {/* Toast */}\n      {toast.open && (\n        <div className=\"fixed top-4 right-4 z-50 w-[92vw] max-w-sm\">\n          <div\n            className={[\n              \"rounded-2xl border p-4 shadow-lg bg-white dark:bg-slate-900\",\n              toast.variant === \"success\"\n                ? \"border-emerald-200 dark:border-emerald-900\"\n                : \"border-red-200 dark:border-red-900\",\n            ].join(\" \")}\n            role=\"status\"\n          >\n            <div className=\"flex items-start justify-between gap-3\">\n              <div>\n                <p\n                  className={[\n                    \"text-sm font-semibold\",\n                    toast.variant === \"success\"\n                      ? \"text-emerald-700 dark:text-emerald-300\"\n                      : \"text-red-700 dark:text-red-300\",\n                  ].join(\" \")}\n                >\n                  {toast.title}\n                </p>\n                {toast.description && (\n                  <p className=\"mt-1 text-sm text-slate-600 dark:text-slate-300\">\n                    {toast.description}\n                  </p>\n                )}\n              </div>\n              <button\n                type=\"button\"\n                onClick={closeToast}\n                className=\"rounded-lg px-2 py-1 text-sm text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800\"\n                aria-label=\"Close\"\n              >\n                ‚úï\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"w-full max-w-md rounded-3xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm\">\n        <div className=\"p-6 md:p-8\">\n          <h1 className=\"text-3xl font-bold text-center\">Connexion</h1>\n          <p className=\"mt-2 text-center text-slate-600 dark:text-slate-300\">\n            Acc√©dez √† votre tableau de bord\n          </p>\n\n          {registered && (\n            <div className=\"mt-6 rounded-2xl border border-emerald-200 dark:border-emerald-900 bg-emerald-50 dark:bg-emerald-950/40 p-3\">\n              <p className=\"text-sm text-emerald-800 dark:text-emerald-200\">\n                ‚úì Compte cr√©√© avec succ√®s ! Connectez-vous maintenant.\n              </p>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"mt-6 space-y-4\">\n            <div className=\"space-y-2\">\n              <label htmlFor=\"email\" className=\"text-sm font-medium text-slate-700 dark:text-slate-200\">\n                Email\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                placeholder=\"exemple@email.com\"\n                value={formData.email}\n                onChange={handleChange}\n                required\n                autoComplete=\"email\"\n                className={fieldError.email ? inputErr : inputOk}\n              />\n              {fieldError.email && (\n                <p className=\"text-sm text-red-600 dark:text-red-300\">{fieldError.email}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <label htmlFor=\"password\" className=\"text-sm font-medium text-slate-700 dark:text-slate-200\">\n                  Mot de passe\n                </label>\n                <Link href=\"/forgot-password\" className=\"text-sm text-slate-900 dark:text-slate-100 hover:underline\">\n                  Mot de passe oubli√© ?\n                </Link>\n              </div>\n\n              <div className=\"relative\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={formData.password}\n                  onChange={handleChange}\n                  required\n                  autoComplete=\"current-password\"\n                  className={inputOk + \" pr-12\"}\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword((v) => !v)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 rounded-lg px-2 py-1 text-sm text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800\"\n                  aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n                >\n                  {showPassword ? \"üôà\" : \"üëÅÔ∏è\"}\n                </button>\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full inline-flex items-center justify-center gap-2 rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 disabled:opacity-60 disabled:cursor-not-allowed\"\n            >\n              {isLoading && (\n                <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n              )}\n              {isLoading ? \"Connexion...\" : \"Se connecter\"}\n            </button>\n          </form>\n\n          <div className=\"mt-8\">\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <span className=\"w-full border-t border-slate-200 dark:border-slate-800\" />\n              </div>\n              <div className=\"relative flex justify-center text-xs uppercase\">\n                <span className=\"bg-white dark:bg-slate-900 px-2 text-slate-500\">\n                  Nouveau sur FlexDZ ?\n                </span>\n              </div>\n            </div>\n\n            <Link\n              href=\"/signup\"\n              className=\"mt-4 inline-flex w-full items-center justify-center rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-100 transition hover:bg-slate-50 dark:hover:bg-slate-800\"\n            >\n              Cr√©er un compte\n            </Link>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}